
<!doctype html>

<title>CodeMirror Text Editor with VIM Bindings</title>
<meta charset="utf-8"/>
<link rel="stylesheet" href="http://codemirror.net/lib/codemirror.css">

<script src="http://codemirror.net/lib/codemirror.js"></script>
<script src="http://codemirror.net/addon/edit/matchbrackets.js"></script>
<script src="http://codemirror.net/addon/comment/continuecomment.js"></script>
<script src="http://codemirror.net/addon/comment/comment.js"></script>
<script src="http://codemirror.net/mode/javascript/javascript.js"></script>

<link rel="stylesheet" href="../addon/dialog/dialog.css">
<script src="http://codemirror.net/addon/dialog/dialog.js"></script>
<script src="http://codemirror.net/addon/search/searchcursor.js"></script>
<script src="http://codemirror.net/mode/clike/clike.js"></script>

<script src="http://codemirror.net/keymap/vim.js"></script>
<style type="text/css">
  .CodeMirror {
    border-top: 1px solid #eee;
    border-bottom: 1px solid #eee;
    height: auto;
  }
</style>
<form><textarea id="code" name="code"></textarea></form>
<div style="font-size: 13px; width: 100%; height: 31px; padding-top: 9px; position: fixed; bottom: 0; background: white; z-index: 1000">Key buffer: <span id="command-display"></span></div>
<script>
  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
    lineNumbers: true,
    keyMap: "vim",
    matchBrackets: true,
    showCursorWhenSelecting: true,
    viewportMargin: Infinity
  });
  var commandDisplay = document.getElementById('command-display');
  var keys = '';
  CodeMirror.on(editor, 'vim-keypress', function(key) {
    keys = keys + key;
    commandDisplay.innerHTML = keys;
  });
  CodeMirror.on(editor, 'vim-command-done', function(e) {
    keys = '';
    commandDisplay.innerHTML = keys;
  });
</script>
